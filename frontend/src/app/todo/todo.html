<div class="todo-container">
  <h2>My Todos</h2>
  
    <!-- Add this error div right after the header -->
  @if (errorMessage) {
    <div class="error-message">
      ⚠️ {{ errorMessage }}
      <button (click)="errorMessage = ''" class="close-btn">×</button>
    </div>
  }


  <div class="add-todo">
    <input [(ngModel)]="newTodo.title" (input)="clearError()" placeholder="Title" required>
    <input [(ngModel)]="newTodo.description" (input)="clearError()" placeholder="Description">
    <button (click)="addTodo()" [disabled]="!newTodo.title.trim()">Add</button>
  </div>
  
  @if (isLoading) {
    <p>Loading todos...</p>
  } @else {
    <div class="todo-list">
      @for (todo of todos; track todo.id) {
        <div class="todo-item" [class.completed]="todo.completed">
          <div class="todo-content">
            <h3>{{ todo.title }}</h3>
            @if (todo.description) {
              <p>{{ todo.description }}</p>
            }
          </div>
          <div class="todo-actions">
            <input 
              type="checkbox" 
              [checked]="todo.completed" 
              (change)="toggleComplete(todo)"
            >
            <button (click)="deleteTodo(todo.id)">Delete</button>
          </div>
        </div>
      } @empty {
        <p>No todos found. Add one above!</p>
      }
    </div>
  }
</div>